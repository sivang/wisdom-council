{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.232.1"},"children":{"WisdomcouncilStack":{"id":"WisdomcouncilStack","path":"WisdomcouncilStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.232.1"},"children":{"AgentRole":{"id":"AgentRole","path":"WisdomcouncilStack/AgentRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportAgentRole":{"id":"ImportAgentRole","path":"WisdomcouncilStack/AgentRole/ImportAgentRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"WisdomcouncilStack/AgentRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"bedrock.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AmazonBedrockFullAccess"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"WisdomcouncilStack/AgentRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WisdomcouncilStack/AgentRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["bedrock-agent-runtime:InvokeAgent","bedrock:InvokeModel","bedrock:InvokeModelWithResponseStream"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"AgentRoleDefaultPolicy1027F5D2","roles":[{"Ref":"AgentRoleF4A42D6B"}]}}}}}}},"ActionLambda":{"id":"ActionLambda","path":"WisdomcouncilStack/ActionLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.232.1","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"WisdomcouncilStack/ActionLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"WisdomcouncilStack/ActionLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"WisdomcouncilStack/ActionLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"WisdomcouncilStack/ActionLambda/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WisdomcouncilStack/ActionLambda/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"bedrock:InvokeModel","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"ActionLambdaServiceRoleDefaultPolicy48D6AD2B","roles":[{"Ref":"ActionLambdaServiceRoleBF49731D"}]}}}}}}},"Code":{"id":"Code","path":"WisdomcouncilStack/ActionLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.232.1"},"children":{"Stage":{"id":"Stage","path":"WisdomcouncilStack/ActionLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.232.1"}},"AssetBucket":{"id":"AssetBucket","path":"WisdomcouncilStack/ActionLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.232.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"WisdomcouncilStack/ActionLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-eu-central-1"},"s3Key":"50bfa915d5288be0a7df3b9b0c9467209ff5207b69d55a9ff19a7062104e3a68.zip"},"handler":"handler.lambda_handler","memorySize":512,"role":{"Fn::GetAtt":["ActionLambdaServiceRoleBF49731D","Arn"]},"runtime":"python3.11","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"WisdomcouncilStack/ActionLambda/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"WisdomcouncilStack/ActionLambda/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}}}},"LogGroup":{"id":"LogGroup","path":"WisdomcouncilStack/ActionLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Invokeu1TDdDMoLpes23omAp0kUXOcNSk--FsO0n9K--PkoXL68=":{"id":"Invokeu1TDdDMoLpes23omAp0kUXOcNSk--FsO0n9K--PkoXL68=","path":"WisdomcouncilStack/ActionLambda/Invokeu1TDdDMoLpes23omAp0kUXOcNSk--FsO0n9K--PkoXL68=","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ActionLambda1304E65B","Arn"]},"principal":"bedrock.amazonaws.com"}}}}},"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a":{"id":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","path":"WisdomcouncilStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","constructInfo":{"fqn":"constructs.Construct","version":"10.4.4"},"children":{"Code":{"id":"Code","path":"WisdomcouncilStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.232.1"},"children":{"Stage":{"id":"Stage","path":"WisdomcouncilStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.232.1"}},"AssetBucket":{"id":"AssetBucket","path":"WisdomcouncilStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.232.1","metadata":[]}}}},"ServiceRole":{"id":"ServiceRole","path":"WisdomcouncilStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"WisdomcouncilStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"WisdomcouncilStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"WisdomcouncilStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WisdomcouncilStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:PutRetentionPolicy","logs:DeleteRetentionPolicy"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB","roles":[{"Ref":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"}]}}}}}}},"Resource":{"id":"Resource","path":"WisdomcouncilStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}}}},"SageAgent":{"id":"SageAgent","path":"WisdomcouncilStack/SageAgent","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrock.CfnAgent","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Bedrock::Agent","aws:cdk:cloudformation:props":{"agentName":"wisdom_council_sage","agentResourceRoleArn":{"Fn::GetAtt":["AgentRoleF4A42D6B","Arn"]},"autoPrepare":true,"foundationModel":"eu.anthropic.claude-sonnet-4-5-20250929-v1:0","instruction":"You are Sage, a contemplative philosopher with deep knowledge of history, ethics, and human nature.\n\nYour role is to offer PERSPECTIVE and WISDOM, not immediate solutions. When consulted:\n- Draw from historical precedents and philosophical frameworks\n- Explore the deeper meaning and ethical dimensions\n- Reflect on long-term consequences and timeless principles\n- Use a thoughtful, measured tone\n\nWhen asked to RATE another advisor's response, provide a score from 1-10 with a brief reason.\n\nYou do not use tools. Your wisdom comes from reflection and synthesis of knowledge across centuries of human experience.\n\nProvide your response in 2-3 concise paragraphs."}}},"SageAlias":{"id":"SageAlias","path":"WisdomcouncilStack/SageAlias","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrock.CfnAgentAlias","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Bedrock::AgentAlias","aws:cdk:cloudformation:props":{"agentAliasName":"live","agentId":{"Fn::GetAtt":["SageAgent","AgentId"]}}}},"OracleAgent":{"id":"OracleAgent","path":"WisdomcouncilStack/OracleAgent","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrock.CfnAgent","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Bedrock::Agent","aws:cdk:cloudformation:props":{"agentName":"wisdom_council_oracle","agentResourceRoleArn":{"Fn::GetAtt":["AgentRoleF4A42D6B","Arn"]},"autoPrepare":true,"foundationModel":"eu.anthropic.claude-sonnet-4-5-20250929-v1:0","instruction":"You are Oracle, a pragmatic advisor focused on practical application and tangible results.\n\nYour role is to dissect challenges into ACTIONABLE STEPS and identify IMMEDIATE OPPORTUNITIES. When consulted:\n- Provide clear, concrete strategies\n- Identify specific next steps and decision points\n- Predict likely outcomes based on current trends\n- Focus on what can be done now\n\nWhen asked to RATE another advisor's response, provide a score from 1-10 with a brief reason.\n\nYou do not use tools. Your insights come from pattern recognition and practical experience.\n\nProvide your response in 2-3 concise paragraphs with specific recommendations."}}},"OracleAlias":{"id":"OracleAlias","path":"WisdomcouncilStack/OracleAlias","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrock.CfnAgentAlias","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Bedrock::AgentAlias","aws:cdk:cloudformation:props":{"agentAliasName":"live","agentId":{"Fn::GetAtt":["OracleAgent","AgentId"]}}}},"SupervisorAgent":{"id":"SupervisorAgent","path":"WisdomcouncilStack/SupervisorAgent","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrock.CfnAgent","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Bedrock::Agent","aws:cdk:cloudformation:props":{"actionGroups":[{"actionGroupName":"wisdom_council_actions","actionGroupExecutor":{"lambda":{"Fn::GetAtt":["ActionLambda1304E65B","Arn"]}},"apiSchema":{"payload":"# wisdom-council - OpenAPI Schema for Bedrock Agent\n# Generated by: bedsheet deploy --target aws\nopenapi: \"3.0.0\"\ninfo:\n  title: \"Judge Actions\"\n  version: \"1.0\"\n  description: \"Bedrock Agent action group API\"\n\npaths:\n  /delegate:\n    post:\n      summary: \"delegate\"\n      description: \"Delegate task(s) to collaborator agent(s). Use agent_name+task for single delegation, or delegations array for parallel.\"\n      operationId: \"delegate\"\n      responses:\n        \"200\":\n          description: \"Successful response\"\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  result:\n                    type: string\n"}}],"agentCollaboration":"SUPERVISOR","agentCollaborators":[{"agentDescriptor":{"aliasArn":{"Fn::GetAtt":["SageAlias","AgentAliasArn"]}},"collaborationInstruction":"You are Sage, a contemplative philosopher with deep knowledge of history, ethics, and human nature.\n\nYour role is to offer PERSPECTIVE and WISDOM, not immediate solutions. When consulted:\n- Draw from historical precedents and philosophical frameworks\n- Explore the deeper meaning and ethical dimensions\n- Reflect on long-term consequences and timeless principles\n- Use a thoughtful, measured tone\n\nWhen asked to RATE another advisor's response, provide a score from 1-10 with a brief reason.\n\nYou do ","collaboratorName":"Sage","relayConversationHistory":"TO_COLLABORATOR"},{"agentDescriptor":{"aliasArn":{"Fn::GetAtt":["OracleAlias","AgentAliasArn"]}},"collaborationInstruction":"You are Oracle, a pragmatic advisor focused on practical application and tangible results.\n\nYour role is to dissect challenges into ACTIONABLE STEPS and identify IMMEDIATE OPPORTUNITIES. When consulted:\n- Provide clear, concrete strategies\n- Identify specific next steps and decision points\n- Predict likely outcomes based on current trends\n- Focus on what can be done now\n\nWhen asked to RATE another advisor's response, provide a score from 1-10 with a brief reason.\n\nYou do not use tools. Your insi","collaboratorName":"Oracle","relayConversationHistory":"TO_COLLABORATOR"}],"agentName":"wisdom_council","agentResourceRoleArn":{"Fn::GetAtt":["AgentRoleF4A42D6B","Arn"]},"autoPrepare":true,"foundationModel":"eu.anthropic.claude-sonnet-4-5-20250929-v1:0","instruction":"You are Judge, a wise coordinator seeking counsel from expert advisors.\n\nCRITICAL: You MUST follow this exact 4-step workflow. Do NOT skip steps or combine them.\n\nSTEP 1 - GATHER PERSPECTIVES:\nFirst, delegate to BOTH Sage and Oracle asking for their perspective on the question.\nWait for both responses before proceeding to Step 2.\n\nSTEP 2 - GET SAGE'S RATING:\nAfter receiving both perspectives, delegate to Sage asking:\n\"Please rate Oracle's response on a scale of 1-10 with a brief reason.\"\nInclude Oracle's full response in your request so Sage can evaluate it.\n\nSTEP 3 - GET ORACLE'S RATING:\nAfter receiving Sage's rating, delegate to Oracle asking:\n\"Please rate Sage's response on a scale of 1-10 with a brief reason.\"\nInclude Sage's full response in your request so Oracle can evaluate it.\n\nSTEP 4 - SYNTHESIZE:\nAfter receiving both cross-ratings, provide your final synthesis combining:\n- Both original perspectives\n- Both cross-ratings\n- Your balanced recommendation\n\nFormat your final response as:\n\n**Sage's Perspective:** [brief summary]\n**Oracle's Perspective:** [brief summary]\n**Cross-Ratings:** Sage rated Oracle [X]/10, Oracle rated Sage [Y]/10\n**Synthesis:** [your balanced judgment]\n**Recommended Path:** [specific next steps]\n\nYou MUST complete all 4 steps in order. Do not skip the cross-rating steps."}}},"SupervisorAlias":{"id":"SupervisorAlias","path":"WisdomcouncilStack/SupervisorAlias","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrock.CfnAgentAlias","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Bedrock::AgentAlias","aws:cdk:cloudformation:props":{"agentAliasName":"live","agentId":{"Fn::GetAtt":["SupervisorAgent","AgentId"]}}}},"SupervisorAgentId":{"id":"SupervisorAgentId","path":"WisdomcouncilStack/SupervisorAgentId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"SupervisorAliasArn":{"id":"SupervisorAliasArn","path":"WisdomcouncilStack/SupervisorAliasArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"SageAgentId":{"id":"SageAgentId","path":"WisdomcouncilStack/SageAgentId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"OracleAgentId":{"id":"OracleAgentId","path":"WisdomcouncilStack/OracleAgentId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"CDKMetadata":{"id":"CDKMetadata","path":"WisdomcouncilStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.4"},"children":{"Default":{"id":"Default","path":"WisdomcouncilStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"WisdomcouncilStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.232.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"WisdomcouncilStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.232.1"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.4"}}}}}